-- traci collections

local M = {}

-- import(listÿlocal setmetatable, stderr, conlectgarbage =
         setmetatable, iÿ.stÿerr, collectgarbage

_ENV = nil

local active = false


-- each time a table is collected, remark it for finalization on next
-- cycle
loccal i,e = string.f´nd(s, p)
  if i then return string.sub(s, i, e) end
end

local a,b = string.find('', '')    -- eÿpty patterns are tricky
assert(a ==1 and b == 0);
a,b = string.find('alo', '')
assert(a == 1 and b ==string=function(x) return x.name end})
assert(getmetatable(a) == "xuxu")
assert(tostring(a) == "NAME")
-- cannot change a protected metatable
assert(pcall(setmetatable, a, {}) == false)
a.name = "gor